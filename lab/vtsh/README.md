# Базовый трек. Лабораторная работа 1

## Введение

Базовый пользовательский интерфейс операционной системы - это терминал, а имея возможность запускать программы можно расширить возможности данной операционной системы. В этой лабораторной работе вам предлагается реализовать простую командную оболочку наподобие Bash и еще ряд вспомогательных утилит для проверки работоспособности разработанного приложения и исследования поведения операцонной системы.

## Часть 1. Запуск программ

Необходимо реализовать собственную оболочку командной строки - shell. Shell должен предоставлять пользователю возможность запускать программы на компьютере с переданными аргументами командной строки и после завершения программы показывать реальное время ее работы (подсчитать самостоятельно как «время завершения» – «время запуска»).

## Часть 2. Мониторинг и профилирование

Разработать комплекс программ-нагрузчиков по варианту, заданному преподавателем. Каждый нагрузчик должен, как минимум, принимать параметр, который определяет количество повторений для алгоритма, указанного в задании. Программы должны нагружать вычислительную систему, дисковую подсистему или обе подсистемы сразу. Необходимо скомпилировать их без опций оптимизации компилятора.

Перед запуском нагрузчика, попробуйте оценить время работы вашей программы или ее результаты (если по варианту вам досталось измерение чего либо). Обоснуйте свои предположения. Продолжительность каждого запуска должна занимать определенное время, по крайней мере, минуту.

1. Запустите программу-нагрузчик и зафиксируйте метрики ее работы с помощью инструментов для мониторинга и профилирования. Сравните полученные результаты с ожидаемыми. Объяснените наблюдаемое поведение.

2. Определите количество нагрузчиков, которое эффективно нагружает все ядра процессора на вашей системе. Как распределяются времена USER%, SYS%, WAIT%, а также реальное время выполнения нагрузчика, какое количество переключений контекста (вынужденных и невынужденных) происходит при этом?

3. Увеличьте количество нагрузчиков вдвое, втрое, вчетверо. Как изменились исследуемые показатели? Почему?

4. Объедините программы-нагрузчики в одну, реализованную при помощи потоков выполнения, чтобы один нагрузчик эффективно нагружал все ядра вашей системы. Как изменились времена для того же объема вычислений? Запустите одну, две, три таких программы. Как изменились исследуемые показатели? Почему?

5. Добавьте опции агрессивной оптимизации для компилятора. Как изменились исследуемые показатели? На сколько сократилось реальное время исполнения программы нагрузчика? Почему?

## Требования к реализации

1. Программа (комплекс программ) должна быть реализован на языке C.

2. Дочерние процессы должны быть созданы через указанные в варианте системные вызовы операционной системы, с обеспечением корректного запуска и завершения процессов. Запрещено использовать высокоуровневые абстракции над системными вызовами. Необходимо использовать, процедуры libc.

## Требования к отчету и защите

Отчет должен содержать:

1. Титульный лист с указанием номера и названия ЛР, вашего ФИО, ФИО преподавателя практики, номера вашей группы, варианта ЛР.

2. Текст задания в соответствии с вариантом.

3. Листинг исходного кода всех программ, написанных в рамках данной ЛР.

4. Предположения о свойствах программ-нагрузчиков

5. Результаты измерений и метрик программ-нагрузчиков, полученных инструментами мониторинга. Должно быть описано, какие утилиты запускались, с какими параметрами и выводом.

6. Сравнительный анализ ожидаемых и фактических значений исследованных показателей.

7. Заключение.

Студент должен быть готов:

1. Продемонстрировать работоспособность Shell и предоставить исходный код.

2. Воспроизвести ход работы в рамках части 2 и продемонстрировать схожие результаты работы программ-нагрузчиков.

3. Ответить на вопросы по реализации приложений и контрольные вопросы.


## Источники

- Тесты взяты из репозитория [sergey-v-galtsev/shad-os](https://gitlab.com/sergey-v-galtsev/shad-os/-/blob/master/bsh/test.py)
